<div class="section-content">
    <div id="olive-draw">
        <div class="demo-container">
            <div class="line-wrap">
                <div class="ui sub header" id="codetype-text">편집 모드</div>
                <select id="draw-mode" class="ui dropdown" data-bind="value: mode, valueUpdate: 'select'"></select>
            </div>
            <div class="line-wrap">
                <div class="ui sub header">이미지</div>
                <select id="draw-image" style="width: 120px;" class="ui dropdown" data-bind="value: image, valueUpdate: 'select'"></select>
            </div>
            <div>
                <input style="display:none;" type="checkbox" data-bind="checked: enableStyle" />
            </div>
            <div class="line-wrap">
                <div class="ui sub header">선 두께</div>
                <input style="width: 75px" type="range" min="1" max="50" step="1" data-bind="value: lineWidth, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: lineWidth">1</span>px
            </div>
            <div class="line-wrap">
                <div class="ui sub header">선 색상</div>
                <input style="width: 40px" type="color" data-bind="value: lineColor, valueUpdate: 'input', enable: enableStyle" value="new Cesium.Color( 255,1,1,1 )"> <span data-bind="text: lineColor"></span>
            </div>
            <div class="line-wrap">
                <div class="ui sub header">선 투명도</div>
                <input style="width: 75px" type="range" min="1.0" max="100.0" step="1.0" data-bind="value: lineTransparent, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: lineTransparent">1</span>%
            </div>
            <div class="line-wrap">
                <div class="ui sub header">크기</div>
                <input style="width: 75px" type="range" min="1.0" max="1000.0" step="1.0" data-bind="value: size, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: size">1</span>m
            </div>

            <div class="line-wrap">
                <div class="ui sub header">선 스타일</div>
                <select class="ui dropdown" name="lineStyle" data-bind="value: lineStyle, valueUpdate: 'select'">
                  <option value="line">line</option>
                  <option value="line">dot</option>
                  <option value="line">long-dot</option>
                  <option value="line">dot-dot-line</option>
              </select>
            </div>
        </div>

        <div class="demo-container">
            <div class="line-wrap">
                <div class="ui sub header">면 색상</div>
                <input style="width: 40px" type="color" data-bind="value: faceColor, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: faceColor"></span>
            </div>
            <div class="line-wrap">
                <div class="ui sub header">면 투명도</div>
                <input style="width: 75px" type="range" min="1.0" max="100.0" step="1.0" data-bind="value: faceTransparent, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: faceTransparent">1</span>%
            </div>
            <div class="line-wrap">
                <div class="ui sub header"><input type="checkbox" style="margin-left:0px;" data-bind="checked: frameEnable, valueUpdate: 'input', enable: enableStyle">프레임</div>
                <input style="width: 40px" type="color" data-bind="value: frameColor, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: frameColor"></span>
            </div>
        </div>

        <div class="demo-container">
            <label><input type="radio" name="shapeStyle" value="point" data-bind="checked: shapeStyle, valueUpdate: 'input', enable: enableStyle"> point</label>
            <label><input type="radio" name="shapeStyle" value="rect" data-bind="checked: shapeStyle, valueUpdate: 'input', enable: enableStyle"> rect</label>
            <label><input type="radio" name="shapeStyle" value="star" data-bind="checked: shapeStyle, valueUpdate: 'input', enable: enableStyle"> star</label>
            <label><input type="radio" name="shapeStyle" value="pin" data-bind="checked: shapeStyle, valueUpdate: 'input', enable: enableStyle"> pin</label>
            <div class="line-wrap">
                <div class="ui sub header">색상</div>
                <input style="width: 40px" type="color" data-bind="value: shapeColor, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: shapeColor"></span>
            </div>
            <div class="line-wrap">
                <div class="ui sub header">크기</div>
                <input style="width: 75px" type="range" min="1.0" max="100.0" step="1.0" data-bind="value: shapeSize, valueUpdate: 'input', enable: enableStyle"> <span data-bind="text: shapeSize">5<0/span>px
    
            </div>  
        </div>
  </div>
  <div class="ui sub header">Pin</div>
    <div id="olive-marker">
        <div class="demo-container">
            <label><input type="radio" name="type" value="color" data-bind="checked: type"> color</label>
            <label><input type="radio" name="type" value="text" data-bind="checked: type"> text</label>
            <label><input type="radio" name="type" value="icon" data-bind="checked: type"> icon</label>
            <label><input type="radio" name="type" value="image" data-bind="checked: type"> image</label>
        </div>
        <div class="demo-container">
          <div class="line-wrap">
            <div class="ui sub header" >문자</div>
            <input type="text" data-bind="value: text" style="color:black;"/>
            </div>
            <div class="line-wrap">
              <div class="ui sub header" >크기</div>
              <input style="width: 95px" type="range" min="1.0" max="100.0" step="1.0" data-bind="value: size, valueUpdate: 'input'"> <span data-bind="text: size">48</span>px
            </div>
            <div class="line-wrap">
                <div class="ui sub header">높이</div>
                <input style="width: 95px" type="range" min="1.0" max="1000.0" step="1.0" data-bind="value: height, valueUpdate: 'input'"> <span data-bind="text: height">1</span>m
            </div>
            <div class="line-wrap">
                <div class="ui sub header">색상</div>
                <input style="width: 40px" type="color" data-bind="value: color, valueUpdate: 'input'"> <span data-bind="text: color"></span>
            </div>
            <div class="line-wrap">
                <div class="ui sub header">아이콘</div>
                <input type="text" data-bind="value: icon" style="color:black;" />
            </div>
            <div class="line-wrap">
                <div class="ui sub header">아미지</div>
                <input type="text" data-bind="value: url" style="color:black;" />
            </div>
        </div>
        <div class="demo-container">
            <div id="olive-marker-result" style="border:1px solid #ddd;border-radius:5px;padding:10px;height:100px;background-color: white;">

            </div>
        </div>


    </div>
</div>

<script>
    let select = $("#draw-mode");
    select.append("<option value='view'>선택</option>");
    let _map_ = app.getOpenedMap();
    if (Q.isValid(_map_)) {
        _map_.getDrawList().forEach(row => {
            select.append("<option value='" + row.key + "'>" + row.name + "</option>");
        });
    }

    serverAdapter.get('images', {
        url: 'img/maki'
    }, function(data) {
        let selectImg = $("#draw-image");
        data.result.forEach(row => {
            selectImg.append("<option value='img/maki/" + row + "'>" + row + "</option>");
        });
    });
    let m = app.getOpenedMap();
    m.connectViewModel('olive-draw', {
        mode: 'view',
        enableStyle: false,
        lineWidth: 1,
        lineColor: "#ffffff",
        lineTransparent: 1,
        lineStyle: 'line',
        size: 10,
        faceColor: "#ffffff",
        faceTransparent: 1,
        frameEnable: false,
        frameColor: "#ffffff",
        shapeStyle: 'point',
        shapeColor: "#ffffff",
        shapeSize: 5,
        image: ''
    }, function(viewer, viewModel) {
        if (viewModel.mode == 'view') {
            viewModel.enableStyle = false;
        } else {
            viewModel.enableStyle = true;
        }
        if (Q.isValid(app)) {
            let _map_ = app.getOpenedMap();
            if (Q.isValid(_map_)) {
                _map_.setDrawMode(viewModel);
            }
        }
        viewer.scene.requestRender();
    });

    var marker = new ViewModel_Marker({
        selector: "#olive-marker-result"
    });
    m.connectViewModel('olive-marker', {
        type: 'color',
        text: 'A',
        size: 48,
        height: 0,
        color: "#da2970",
        icon: 'hospital',
        url: "img/flag/KR.png",
    }, function(viewer, viewModel) {
        marker.update(viewModel);
    });
</script>