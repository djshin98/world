<div class="section-content">
    <div id="city-view" class="filetree" style="height:100%;">
    </div>
</div>

<script>
    mariaDB.excuteQuery('Entities', {}, function(resultdata) {
        var node = [{
            name: '아군부대',
            children: []
        }, {
            name: 'bmoa',
            children: []
        }, {
            name: '적부대',
            children: []
        }];
        var index = 0;
        for (var r in resultdata) {
            node[index].children = resultdata[r].reduce(function(prev, curr, i) {
                if (curr.hasOwnProperty('ARMY_NAME')) {
                    prev.push({
                        name: curr.ARMY_NAME
                    });
                } else {
                    prev.push({
                        name: curr.BMOA_ID
                    })
                }
                return prev;
            }, []);
            index++;
        }
        new OliveTree("#city-view", node, {
            onText: function(d) {
                return d.name;
            }
        });
    });
    /* app.onReady(function() {
        console.log("test");
        new OliveTree("#entities-view", undefined, {
            onAttribute: function(d) {
                return {
                    id: d.id
                };
            },
            onText: function(d) {
                return d.name;
            }
        });
    }); */
</script>