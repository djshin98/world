<div class="section-content" id="viewmodel-milsymbol">
    <div class="line-wrap">
        <div class="ui sub header" id="codetype-text">코드 타입</div>
        <select class="ui dropdown" id="codetype"></select>
    </div>
    <div class="line-wrap">
        <div class="ui sub header" id="affiliation-text">피아관계</div>
        <select class="ui dropdown" id="affiliation"></select>
    </div>
    <div class="line-wrap">
        <div class="ui sub header" id="battlefield-text">전장</div>
        <select class="ui dropdown" id="battlefield"></select>
    </div>
    <div class="line-wrap">
        <div class="ui sub header" id="status-text">상태</div>
        <select class="ui dropdown" id="status"></select>
    </div>
    <div class="line-wrap">
        <div class="ui sub header" id="mission-text">임무</div>
        <select class="ui dropdown" id="mission"></select>
    </div>
    <div class="ui sub header" id="function-indentifier-text">기능 조정자</div>
    <ul id="function-indentifier" class="filetree" style="height:380px;">

    </ul>

    <div class="ui sub header">부대단위 및 이동수단</div>
    <ul id="unit" class="filetree" style="height:100px;">

    </ul>
    <div class="ui divider"></div>
    <div class="ui sub header">코드</div>

    <div class="ui inline">
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="mil-option-fill">
            <label class="custom-control-label" for="defaultUnchecked">fill</label>
        </div>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="mil-option-frame">
            <label class="custom-control-label" for="defaultUnchecked">frame</label>
        </div>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="mil-option-icon">
            <label class="custom-control-label" for="defaultUnchecked">icon</label>
        </div>
        <input type="color" id="mil-option-monocolor" style="width:2em;border-radius: 3px;">
    </div>

    <div class="ui inline">
        <div class="ui ">
            <label>size</label>
            <input class="ui input" id="mil-option-size" style="width:50px;" />
        </div>
        <div class="ui right">
            <label>desc</label>
            <input class="ui input" id="mil-option-label" style="width:80px;" />
        </div>
    </div>


    <div class="ui inline">
        <input class="ui input" id="sidc" style="width:130px;" />
        <div class="ui right">
            <i class="minus square outline icon"></i>
        </div>
        <div class="ui right">
            <i class="plus square outline icon"></i>
        </div>

    </div>
    <div class="ui result" id="sidc-img"></div>


</div>

<script>
    /*
                    app.onReady(function(_app, _map_) {
                        let m = _app.articles.getMap(3);
                        if (Q.isValid(m)) {
                            var ctrl = new ViewModel_KMilSymbol({
                                selector: "#viewmodel-milsymbol"
                            });
                            m.connectViewModel('viewmodel-milsymbol', {
                                type: 'color',
                                text: 'A',
                                size: 48,
                                height: 0,
                                color: "#da2970",
                                icon: 'hospital',
                                url: "img/flag/KR.png",
                            }, function(viewer, viewModel) {
                                ctrl.update(viewModel);
                            });
                        }
                    });*/
    var selectedCodeTypeObj = new ViewModel_KMilSymbol({
        id: "viewmodel-milsymbol",
        view: {
            CODETYPE: "codetype",
            AFFILIATION: "affiliation",
            BATTLEFIELD: "battlefield",
            STATUS: "status",
            MISSION: "mission",
            FI: "function-indentifier",
            UNIT: "unit",
            SIDC: "sidc",
            RESULT: "sidc-img",
            option: {
                FILL: "mil-option-fill",
                FRAME: "mil-option-frame",
                ICON: "mil-option-icon",
                COLOR: "mil-option-monocolor",
                SIZE: "mil-option-size",
                DESC: "mil-option-label",
            }
        }
    }, function(viewmodel) {
        /*
        new OliveTree("#viewmodel-milsymbol #function-indentifier", viewmodel.dataset[viewmodel.options.view.FI], {
            onSelect: function(type, tag, obj) {
                if (type == "file") {
                    if (selectedCodeTypeObj.activeType && selectedCodeTypeObj.activeType.code != "W") {
                        let id = tag.getAttribute("data-id");
                        let idf = selectedCodeTypeObj.findFunctionIdentifier(id);
                        if (idf) {
                            selectedCodeTypeObj.changeModifier(idf.modifier, idf.type, idf.affiliation, idf.battlefield, idf.status);
                        }
                    } else {
                        let id = tag.getAttribute("data-id");
                        let idf = selectedCodeTypeObj.findFunctionIdentifier(id);
                        if (idf) {
                            selectedCodeTypeObj.changeModifier(idf.modifier, idf.type, idf.pos, idf.fix, idf.graphic);
                        }
                    }
                }
            }
        });
        new OliveTree("#viewmodel-milsymbol #unit", viewmodel.dataset[viewmodel.options.view.UNIT], {
            onSelect: function(type, tag, obj) {
                if (type == "file") {
                    let id = tag.getAttribute("data-id");
                    let idf = selectedCodeTypeObj.findUnit(id);
                    if (idf) {
                        selectedCodeTypeObj.changeMobility(idf.code);
                    }
                }
            }
        });*/

    });
</script>