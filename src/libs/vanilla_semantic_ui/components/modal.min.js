ui.modal=function(n,s){var t,o,e,i,a,c,r=s.selector,d=s.className,l=s.error,u=n.querySelectorAll(s.context),m=(n.querySelectorAll(r.close),!1);return c={initialize:function(){c.verbose("Initializing dimmer",$context),c.create.id(),c.create.dimmer(),c.refreshModals(),c.bind.events(),s.observeChanges&&c.observeChanges()},create:{dimmer:function(){var e={debug:s.debug,variation:!s.centered&&"top aligned",dimmerName:"modals"},i=ui.extend(!0,e,s.dimmerSettings);void 0!==ui.dimmer?(c.debug("Creating dimmer"),t=ui(u).dimmer(i),s.detachable?(c.verbose("Modal is detachable, moving content into dimmer"),ui(t).dimmer("add content",n)):c.set.undetached(),o=ui(t).dimmer("get dimmer")):c.error(l.dimmer)},id:function(){i=(Math.random().toString(16)+"000000000").substr(2,8),e="."+i,c.verbose("Creating unique id for element",i)}},observeChanges:function(){"MutationObserver"in window&&((a=new MutationObserver(function(e){c.debug("DOM tree modified, refreshing"),c.refresh()})).observe(n,{childList:!0,subtree:!0}),c.debug("Setting up mutation observer",a))},refresh:function(){c.remove.scrolling(),c.cacheSizes(),c.set.screenHeight(),c.set.type()},refreshModals:function(){$otherModals=n.siblings(r.modal),$allModals=$otherModals.add(n)},attachEvents:function(e,i){var t=$(e);i=$.isFunction(c[i])?c[i]:c.toggle,0<t.length?(c.debug("Attaching modal events to element",e,i),t.off(eventNamespace).on("click"+eventNamespace,i)):c.error(l.notFound,e)},bind:{events:function(){c.verbose("Attaching events"),n.on("click"+eventNamespace,r.close,c.event.close).on("click"+eventNamespace,r.approve,c.event.approve).on("click"+eventNamespace,r.deny,c.event.deny),$window.on("resize"+e,c.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){m||!1===s.onApprove.call(n,$(this))?c.verbose("Approve callback returned false cancelling hide"):(m=!0,c.hide(function(){m=!1}))},deny:function(){m||!1===s.onDeny.call(n,$(this))?c.verbose("Deny callback returned false cancelling hide"):(m=!0,c.hide(function(){m=!1}))},close:function(){c.hide()},click:function(e){if(s.closable){var i=0<$(e.target).closest(r.modal).length,t=$.contains(document.documentElement,e.target);!i&&t&&c.is.active()&&(c.debug("Dimmer clicked, hiding all modals"),c.remove.clickaway(),s.allowMultiple?c.hide():c.hideAll())}else c.verbose("Dimmer clicked but closable setting is disabled")},debounce:function(e,i){clearTimeout(c.timer),c.timer=setTimeout(e,i)},keyboard:function(e){27==e.which&&(s.closable?(c.debug("Escape key pressed hiding modal"),c.hide()):c.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){ui(t).dimmer("is active")&&(c.is.animating()||c.is.active())&&requestAnimationFrame(c.refresh)}},toggle:function(){c.is.active()||c.is.animating()?c.hide():c.show()},show:function(e){e="function"==typeof e?e:function(){},c.refreshModals(),c.set.dimmerSettings(),c.showModal(e)},hide:function(e){e="function"==typeof e?e:function(){},c.refreshModals(),c.hideModal(e)},showModal:function(e){e="function"==typeof e?e:function(){},c.is.animating()||!c.is.active()?(c.showDimmer(),c.cacheSizes(),c.set.screenHeight(),c.set.type(),c.set.clickaway(),!s.allowMultiple&&c.others.active()?c.hideOthers(c.showModal):(s.allowMultiple&&s.detachable&&n.detach().appendTo($dimmer),s.onShow.call(n),s.transition&&void 0!==$.fn.transition&&n.transition("is supported")?(c.debug("Showing modal with css animations"),n.transition({debug:s.debug,animation:s.transition+" in",queue:s.queue,duration:s.duration,useFailSafe:!0,onComplete:function(){s.onVisible.apply(n),s.keyboardShortcuts&&c.add.keyboardShortcuts(),c.save.focus(),c.set.active(),s.autofocus&&c.set.autofocus(),e()}})):c.error(l.noTransition))):c.debug("Modal is already visible")},hideModal:function(e,i){e="function"==typeof e?e:function(){},c.debug("Hiding modal"),!1!==s.onHide.call(n,$(this))?(c.is.animating()||c.is.active())&&(s.transition&&void 0!==$.fn.transition&&n.transition("is supported")?(c.remove.active(),n.transition({debug:s.debug,animation:s.transition+" out",queue:s.queue,duration:s.duration,useFailSafe:!0,onStart:function(){c.others.active()||i||c.hideDimmer(),s.keyboardShortcuts&&c.remove.keyboardShortcuts()},onComplete:function(){s.onHidden.call(n),c.restore.focus(),e()}})):c.error(l.noTransition)):c.verbose("Hide callback returned false cancelling hide")},showDimmer:function(){ui(t).dimmer("is animating")||!ui(t).dimmer("is active")?(c.debug("Showing dimmer"),$dimmable.dimmer("show")):c.debug("Dimmer already visible")},hideDimmer:function(){ui(t).dimmer("is animating")||ui(t).dimmer("is active")?ui(t).dimmer("hide",function(){c.remove.clickaway(),c.remove.screenHeight()}):c.debug("Dimmer is not visible cannot hide")},hideAll:function(e){var i=$allModals.filter("."+d.active+", ."+d.animating);e=$.isFunction(e)?e:function(){},0<i.length&&(c.debug("Hiding all visible modals"),c.hideDimmer(),i.modal("hide modal",e))},hideOthers:function(e){var i=$otherModals.filter("."+d.active+", ."+d.animating);e=$.isFunction(e)?e:function(){},0<i.length&&(c.debug("Hiding other modals",$otherModals),i.modal("hide modal",e,!0))},others:{active:function(){return 0<$otherModals.filter("."+d.active).length},animating:function(){return 0<$otherModals.filter("."+d.animating).length}},add:{keyboardShortcuts:function(){c.verbose("Adding keyboard shortcuts"),$document.on("keyup"+eventNamespace,c.event.keyboard)}},save:{focus:function(){0<$(document.activeElement).closest(n).length||($focusedElement=$(document.activeElement).blur())}},restore:{focus:function(){$focusedElement&&0<$focusedElement.length&&$focusedElement.focus()}},remove:{active:function(){n.classList.remove(d.active)},clickaway:function(){$dimmer.off("click"+e)},bodyStyle:function(){""===$body.attr("style")&&(c.verbose("Removing style attribute"),$body.removeAttr("style"))},screenHeight:function(){c.debug("Removing page height"),$body.css("height","")},keyboardShortcuts:function(){c.verbose("Removing keyboard shortcuts"),$document.off("keyup"+eventNamespace)},scrolling:function(){t.classList.remove(d.scrolling),n.classList.remove(d.scrolling)}},cacheSizes:function(){n.classList.add(d.loading);var e=n.prop("scrollHeight"),i=n.outerHeight();void 0!==c.cache&&0===i||(c.cache={pageHeight:$(document).outerHeight(),height:i+s.offset,scrollHeight:e+s.offset,contextHeight:"body"==s.context?$(window).height():$dimmable.height()},c.cache.topOffset=-c.cache.height/2),n.classList.remove(d.loading),c.debug("Caching modal and container sizes",c.cache)},can:{fit:function(){var e=c.cache.contextHeight,i=c.cache.contextHeight/2,t=c.cache.topOffset,n=c.cache.scrollHeight,o=c.cache.height,a=s.padding;return o<n?i+t+n+a<e:o+2*a<e}},is:{active:function(){return n.classList.contains(d.active)},animating:function(){return n.transition("is supported")?n.transition("is animating"):n.is(":visible")},scrolling:function(){return t.classList.contains(d.scrolling)},modernBrowser:function(){return!(window.ActiveXObject||"ActiveXObject"in window)}},set:{autofocus:function(){var e=n.find("[tabindex], :input").filter(":visible"),i=e.filter("[autofocus]"),t=0<i.length?i.first():e.first();0<t.length&&t.focus()},clickaway:function(){$dimmer.on("click"+e,c.event.click)},dimmerSettings:function(){if(void 0!==ui.dimmer){var e={debug:s.debug,dimmerName:"modals",closable:"auto",variation:!s.centered&&"top aligned",duration:{show:s.duration,hide:s.duration}},i=ui.extend(!0,e,s.dimmerSettings);s.inverted?(i.variation=void 0!==i.variation?i.variation+" inverted":"inverted",o.classList.add(d.inverted)):o.classList.remove(d.inverted),s.blurring?t.classList.add(d.blurring):t.classList.remove(d.blurring),ui(u).dimmer("setting",i)}else c.error(l.dimmer)},screenHeight:function(){c.can.fit()?$body.css("height",""):(c.debug("Modal is taller than page content, resizing page height"),$body.css("height",c.cache.height+2*s.padding))},active:function(){n.classList.add(d.active)},scrolling:function(){$dimmable.classList.add(d.scrolling),n.classList.add(d.scrolling)},type:function(){c.can.fit()?(c.verbose("Modal fits on screen"),c.others.active()||c.others.animating()||c.remove.scrolling()):(c.verbose("Modal cannot fit on screen setting to scrolling"),c.set.scrolling())},undetached:function(){t.classList.add(d.undetached)}}}},ui.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,centered:!0,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",loading:"loading",scrolling:"scrolling",undetached:"undetached"}};